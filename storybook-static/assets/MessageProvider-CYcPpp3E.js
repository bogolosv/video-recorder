import{j as N}from"./jsx-runtime-DWbWqHZ-.js";import{R as f,r as d}from"./index-l2PZgWEW.js";import{M as V}from"./const-BFbRbAgg.js";import{P as U}from"./PaddingBox-5Z2Dut0o.js";import{_ as R}from"./objectWithoutPropertiesLoose-CAYKN5F1.js";import{a as k,b as F}from"./assertThisInitialized-Cfdbw4yV.js";import{_ as O}from"./inheritsLoose-BqTeMkAP.js";import{f as T}from"./index-BtTJd_qj.js";function G(a,o){return a.classList?!!o&&a.classList.contains(o):(" "+(a.className.baseVal||a.className)+" ").indexOf(" "+o+" ")!==-1}function w(a,o){a.classList?a.classList.add(o):G(a,o)||(typeof a.className=="string"?a.className=a.className+" "+o:a.setAttribute("class",(a.className&&a.className.baseVal||"")+" "+o))}function L(a,o){return a.replace(new RegExp("(^|\\s)"+o+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}function z(a,o){a.classList?a.classList.remove(o):typeof a.className=="string"?a.className=L(a.className,o):a.setAttribute("class",L(a.className&&a.className.baseVal||"",o))}const $={disabled:!1},_=f.createContext(null);var j=function(o){return o.scrollTop},b="unmounted",v="exited",E="entering",C="entered",A="exiting",m=function(a){O(o,a);function o(t,n){var e;e=a.call(this,t,n)||this;var r=n,s=r&&!r.isMounting?t.enter:t.appear,i;return e.appearStatus=null,t.in?s?(i=v,e.appearStatus=E):i=C:t.unmountOnExit||t.mountOnEnter?i=b:i=v,e.state={status:i},e.nextCallback=null,e}o.getDerivedStateFromProps=function(n,e){var r=n.in;return r&&e.status===b?{status:v}:null};var u=o.prototype;return u.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},u.componentDidUpdate=function(n){var e=null;if(n!==this.props){var r=this.state.status;this.props.in?r!==E&&r!==C&&(e=E):(r===E||r===C)&&(e=A)}this.updateStatus(!1,e)},u.componentWillUnmount=function(){this.cancelNextCallback()},u.getTimeouts=function(){var n=this.props.timeout,e,r,s;return e=r=s=n,n!=null&&typeof n!="number"&&(e=n.exit,r=n.enter,s=n.appear!==void 0?n.appear:r),{exit:e,enter:r,appear:s}},u.updateStatus=function(n,e){if(n===void 0&&(n=!1),e!==null)if(this.cancelNextCallback(),e===E){if(this.props.unmountOnExit||this.props.mountOnEnter){var r=this.props.nodeRef?this.props.nodeRef.current:T.findDOMNode(this);r&&j(r)}this.performEnter(n)}else this.performExit();else this.props.unmountOnExit&&this.state.status===v&&this.setState({status:b})},u.performEnter=function(n){var e=this,r=this.props.enter,s=this.context?this.context.isMounting:n,i=this.props.nodeRef?[s]:[T.findDOMNode(this),s],l=i[0],p=i[1],c=this.getTimeouts(),h=s?c.appear:c.enter;if(!n&&!r||$.disabled){this.safeSetState({status:C},function(){e.props.onEntered(l)});return}this.props.onEnter(l,p),this.safeSetState({status:E},function(){e.props.onEntering(l,p),e.onTransitionEnd(h,function(){e.safeSetState({status:C},function(){e.props.onEntered(l,p)})})})},u.performExit=function(){var n=this,e=this.props.exit,r=this.getTimeouts(),s=this.props.nodeRef?void 0:T.findDOMNode(this);if(!e||$.disabled){this.safeSetState({status:v},function(){n.props.onExited(s)});return}this.props.onExit(s),this.safeSetState({status:A},function(){n.props.onExiting(s),n.onTransitionEnd(r.exit,function(){n.safeSetState({status:v},function(){n.props.onExited(s)})})})},u.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},u.safeSetState=function(n,e){e=this.setNextCallback(e),this.setState(n,e)},u.setNextCallback=function(n){var e=this,r=!0;return this.nextCallback=function(s){r&&(r=!1,e.nextCallback=null,n(s))},this.nextCallback.cancel=function(){r=!1},this.nextCallback},u.onTransitionEnd=function(n,e){this.setNextCallback(e);var r=this.props.nodeRef?this.props.nodeRef.current:T.findDOMNode(this),s=n==null&&!this.props.addEndListener;if(!r||s){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var i=this.props.nodeRef?[this.nextCallback]:[r,this.nextCallback],l=i[0],p=i[1];this.props.addEndListener(l,p)}n!=null&&setTimeout(this.nextCallback,n)},u.render=function(){var n=this.state.status;if(n===b)return null;var e=this.props,r=e.children;e.in,e.mountOnEnter,e.unmountOnExit,e.appear,e.enter,e.exit,e.timeout,e.addEndListener,e.onEnter,e.onEntering,e.onEntered,e.onExit,e.onExiting,e.onExited,e.nodeRef;var s=R(e,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return f.createElement(_.Provider,{value:null},typeof r=="function"?r(n,s):f.cloneElement(f.Children.only(r),s))},o}(f.Component);m.contextType=_;m.propTypes={};function g(){}m.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:g,onEntering:g,onEntered:g,onExit:g,onExiting:g,onExited:g};m.UNMOUNTED=b;m.EXITED=v;m.ENTERING=E;m.ENTERED=C;m.EXITING=A;var W=function(o,u){return o&&u&&u.split(" ").forEach(function(t){return w(o,t)})},M=function(o,u){return o&&u&&u.split(" ").forEach(function(t){return z(o,t)})},D=function(a){O(o,a);function o(){for(var t,n=arguments.length,e=new Array(n),r=0;r<n;r++)e[r]=arguments[r];return t=a.call.apply(a,[this].concat(e))||this,t.appliedClasses={appear:{},enter:{},exit:{}},t.onEnter=function(s,i){var l=t.resolveArguments(s,i),p=l[0],c=l[1];t.removeClasses(p,"exit"),t.addClass(p,c?"appear":"enter","base"),t.props.onEnter&&t.props.onEnter(s,i)},t.onEntering=function(s,i){var l=t.resolveArguments(s,i),p=l[0],c=l[1],h=c?"appear":"enter";t.addClass(p,h,"active"),t.props.onEntering&&t.props.onEntering(s,i)},t.onEntered=function(s,i){var l=t.resolveArguments(s,i),p=l[0],c=l[1],h=c?"appear":"enter";t.removeClasses(p,h),t.addClass(p,h,"done"),t.props.onEntered&&t.props.onEntered(s,i)},t.onExit=function(s){var i=t.resolveArguments(s),l=i[0];t.removeClasses(l,"appear"),t.removeClasses(l,"enter"),t.addClass(l,"exit","base"),t.props.onExit&&t.props.onExit(s)},t.onExiting=function(s){var i=t.resolveArguments(s),l=i[0];t.addClass(l,"exit","active"),t.props.onExiting&&t.props.onExiting(s)},t.onExited=function(s){var i=t.resolveArguments(s),l=i[0];t.removeClasses(l,"exit"),t.addClass(l,"exit","done"),t.props.onExited&&t.props.onExited(s)},t.resolveArguments=function(s,i){return t.props.nodeRef?[t.props.nodeRef.current,s]:[s,i]},t.getClassNames=function(s){var i=t.props.classNames,l=typeof i=="string",p=l&&i?i+"-":"",c=l?""+p+s:i[s],h=l?c+"-active":i[s+"Active"],I=l?c+"-done":i[s+"Done"];return{baseClassName:c,activeClassName:h,doneClassName:I}},t}var u=o.prototype;return u.addClass=function(n,e,r){var s=this.getClassNames(e)[r+"ClassName"],i=this.getClassNames("enter"),l=i.doneClassName;e==="appear"&&r==="done"&&l&&(s+=" "+l),r==="active"&&n&&j(n),s&&(this.appliedClasses[e][r]=s,W(n,s))},u.removeClasses=function(n,e){var r=this.appliedClasses[e],s=r.base,i=r.active,l=r.done;this.appliedClasses[e]={},s&&M(n,s),i&&M(n,i),l&&M(n,l)},u.render=function(){var n=this.props;n.classNames;var e=R(n,["classNames"]);return f.createElement(m,k({},e,{onEnter:this.onEnter,onEntered:this.onEntered,onEntering:this.onEntering,onExit:this.onExit,onExiting:this.onExiting,onExited:this.onExited}))},o}(f.Component);D.defaultProps={classNames:""};D.propTypes={};function y(a,o){var u=function(e){return o&&d.isValidElement(e)?o(e):e},t=Object.create(null);return a&&d.Children.map(a,function(n){return n}).forEach(function(n){t[n.key]=u(n)}),t}function X(a,o){a=a||{},o=o||{};function u(p){return p in o?o[p]:a[p]}var t=Object.create(null),n=[];for(var e in a)e in o?n.length&&(t[e]=n,n=[]):n.push(e);var r,s={};for(var i in o){if(t[i])for(r=0;r<t[i].length;r++){var l=t[i][r];s[t[i][r]]=u(l)}s[i]=u(i)}for(r=0;r<n.length;r++)s[n[r]]=u(n[r]);return s}function x(a,o,u){return u[o]!=null?u[o]:a.props[o]}function B(a,o){return y(a.children,function(u){return d.cloneElement(u,{onExited:o.bind(null,u),in:!0,appear:x(u,"appear",a),enter:x(u,"enter",a),exit:x(u,"exit",a)})})}function q(a,o,u){var t=y(a.children),n=X(o,t);return Object.keys(n).forEach(function(e){var r=n[e];if(d.isValidElement(r)){var s=e in o,i=e in t,l=o[e],p=d.isValidElement(l)&&!l.props.in;i&&(!s||p)?n[e]=d.cloneElement(r,{onExited:u.bind(null,r),in:!0,exit:x(r,"exit",a),enter:x(r,"enter",a)}):!i&&s&&!p?n[e]=d.cloneElement(r,{in:!1}):i&&s&&d.isValidElement(l)&&(n[e]=d.cloneElement(r,{onExited:u.bind(null,r),in:l.props.in,exit:x(r,"exit",a),enter:x(r,"enter",a)}))}}),n}var H=Object.values||function(a){return Object.keys(a).map(function(o){return a[o]})},Y={component:"div",childFactory:function(o){return o}},P=function(a){O(o,a);function o(t,n){var e;e=a.call(this,t,n)||this;var r=e.handleExited.bind(F(e));return e.state={contextValue:{isMounting:!0},handleExited:r,firstRender:!0},e}var u=o.prototype;return u.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},u.componentWillUnmount=function(){this.mounted=!1},o.getDerivedStateFromProps=function(n,e){var r=e.children,s=e.handleExited,i=e.firstRender;return{children:i?B(n,s):q(n,r,s),firstRender:!1}},u.handleExited=function(n,e){var r=y(this.props.children);n.key in r||(n.props.onExited&&n.props.onExited(e),this.mounted&&this.setState(function(s){var i=k({},s.children);return delete i[n.key],{children:i}}))},u.render=function(){var n=this.props,e=n.component,r=n.childFactory,s=R(n,["component","childFactory"]),i=this.state.contextValue,l=H(this.state.children).map(r);return delete s.appear,delete s.enter,delete s.exit,e===null?f.createElement(_.Provider,{value:i},l):f.createElement(_.Provider,{value:i},f.createElement(e,s,l))},o}(f.Component);P.propTypes={};P.defaultProps=Y;const J="#ccd0cf",Q="#9ba8ab",Z="#4a5c6a",K="#253745",ee="#11212d",te="#06141b",ne="_message_xtlzv_10",se="_messageExitActive_xtlzv_20",re="_messageEnter_xtlzv_23",ie="_messageEnterActive_xtlzv_28",S={primary01:J,primary02:Q,primary03:Z,primary04:K,primary05:ee,primary06:te,message:ne,messageExitActive:se,messageEnter:re,messageEnterActive:ie},ae=({children:a})=>{const[o,u]=d.useState([]),t=d.useRef({});console.log(o);const n=d.useCallback(r=>{setTimeout(()=>{u(s=>(delete t.current[r],[...s.filter(i=>r!==i.id)]))},5e3)},[]),e=d.useCallback(async(r,s)=>{const i=Date.now();u(l=>[...l,{content:r,x:(s==null?void 0:s.clientX)??0,y:(s==null?void 0:s.clientY)??0,id:i}]),n(i)},[n]);return d.useEffect(()=>{let s=16;u(o.reduce((i,l)=>{const{height:p}=t.current[l.id].getBoundingClientRect(),c={...l,y:s,x:16};return s+=p+16,[...i,c]},[]))},[o.length]),N.jsxs(V.Provider,{value:{openMessage:e},children:[a,N.jsx(P,{children:o.map(({id:r,content:s,y:i,x:l})=>N.jsx(D,{timeout:300,classNames:{exitActive:S.messageExitActive,enter:S.messageEnter,enterActive:S.messageEnterActive},children:N.jsx("div",{className:S.message,ref:p=>t.current[r]=p,style:{top:`${i}px`,left:`${l}px`},children:N.jsx(U,{medium:!0,children:s})})},r))})]})};ae.__docgenInfo={description:"",methods:[],displayName:"MessageProvider",props:{children:{required:!0,tsType:{name:"ReactNode"},description:""}}};export{ae as M};
